\chapter{Perancangan Perangkat Lunak}
\label{chap:perancangan perangkat lunak}

Pada bab ini akan dibahas mengenai perancangan aplikasi untuk membuat \textit{Twitter Bot} untuk mencari jalur transportasi publik sesuai analisa yang sudah dibahas pada bab 3.

\section{Perancangan Perangkat Lunak}

\subsection{Perancangan Kelas}
Pada sub bab ini akan dibahas rancangan kelas dan \textit{method} yang akan dibuat pada aplikasi pembuatan Twitter Bot untuk mencari jalur transportasi publik. Untuk lebih jelas mengenai kelas yang ada pada aplikasi ini, penulis menyajikan gambar diagram kelas yang dapat dilihat pada gambar ~\ref{fig:classDiagramSkripsi}

\begin{figure}[htbp]
	\centering
		\includegraphics[width=1.00\textwidth]{C:/Skripsi/doc/DokumenSkripsi/Gambar/classDiagramSkripsi.PNG}
	\caption{Class Diagram Pembuatan Twitter Bot untuk Mencari Jalur Transportasi Publik}
	\label{fig:classDiagramSkripsi}
\end{figure}


\begin{itemize}
		\item Kelas Main, merupakan kelas yang berfungsi untuk membuat koneksi dengan Twitter ketika program dijalankan.
		
				\begin{itemize}
							\item Method
							
									\begin{itemize}
												\item public static void main(String[] args), merupakan method main untuk menjalankan program.
										
									\end{itemize}
				\end{itemize}
		
		\item Kelas Twitter Gateway, merupakan kelas untuk menangkap dan membalas Tweet. Kelas Twitter Gateway ini mengimplementasikan \textit{StatusListener}.
		
		
				\begin{itemize}
							\item Atribut
							
							
									\begin{itemize}
												\item String user, digunakan untuk menampung nama user.
												\item String location[], berupa \textit{array} yang digunakan untuk menampung lokasi awal dan lokasi tujuan.
												\item String latlon[], berupa \textit{array} yang digunakan untuk menampung koordinat lokasi awal dan koordinat lokasi tujuan.
												\item RoutingResponse routingResponse, merupakan atribut ??/ variabel?? yang digunakan untuk menampung hasil yang diberikan oleh KIRI API.
												\item Step[] step, berupa \textit{array} yang berguna untuk menampung langkah-langkah informasi perjalanan.
												\item Steps steps, merupakan atribut ??/ variabel?? yang berguna untuk menampung semua step.
									\end{itemize}
							
							\item Method
							
									\begin{itemize}
												\item public void onStatus(Status status), merupakan \textit{method} yang menangkap \textit{tweet} dan memproses \textit{tweet} tersebut. Ketika ada \textit{tweet} yang masuk, \textit{tweet} tersebut akan diolah isinya. Jika \textit{tweet} yang diterima merupakan \textit{tweet} untuk mencari jalur transportasi publik maka \textit{tweet} tersebut akan dimasukan ke atribut yang sudah disediakan yaitu \textit{user}, lokasi awal dan lokasi tujuan. Setelah mendapatkan lokasi awal dan lokasi tujuan barulah proses pencarian dimulai dengan menggunakan \textit{method GetLatLong} dan \textit{method GetTrack} yang terdapat di kelas KIRIGateway. Hasil pencarian akan dimasukan ke dalam atribut \textit{routingResponse}, \textit{step}, dan \textit{steps}. Setelah itu akan dilakukan pemanggilan \textit{method Tweet} untuk melakukan proses balasan.
												\item public void onDeletionNotice(StatusDeletionNotice statusDeletionNotice),
												\item public void onTrackLimitationNotice(int numberOfLimitedStatuses),
												\item public void onScrubGeo(long userId, long upToStatusId),
												\item public void onException(Exception ex), merupakan method yang berguna untuk menangkap \textit{exception}.
												\item public void onStallWarning(StallWarning sw),
												\item public void Tweet(String user, String paramStatusUpdate), merupakan method untuk melakukan \textit{tweet} balasan atau \textit{reply} yang ditujukan kepada \textit{user} tertentu. Twitter sendiri hanya dapat melakukan tweet dengan batas 140 karakter, oleh karena itu method ini akan mengatasi keterbatasan tweet tersebut dengan cara ??memecah-mecah?? tweet. Method ini juga akan memberi waktu yang sesuai dengan server di setiap akhir tweet, hal ini bertujuan untuk menghindari adanya duplikat tweet.
									\end{itemize}
				\end{itemize}
		
		\item Kelas KIRIGateway, merupakan kelas untuk memanggil KIRI API. Pemanggilan KIRI API ini digunakan untuk mendapatkan koordinat suatu lokasi dan mencari jalur transportasi publik.
		
		
				\begin{itemize}
							\item Method
							
							
									\begin{itemize}
												\item public static String GetLatLong(String destination), merupakan \textit{method} yang digunakan untuk mencari koordinat dari suatu lokasi. Hasil kembalian dari \textit{method} ini berupa \textit{latitude} and \textit{longitude} yang diberikan oleh KIRI API lalu diubah ke dalam bentuk \textit{String}.
												\item public static String GetTrack(String dest1, String dest2), merupakan \textit{method} yang digunakan untuk mencari jalur transportasi publik dari lokasi awal ke lokasi tujuan. Hasil kembalian dari method ini adalah langkah-langkah perjalanan dari lokasi awal ke lokasi tujuan dengan menggunakan transportasi publik.
									\end{itemize}
				\end{itemize}
		
		
		\item Kelas RoutingResult, merupakan kelas untuk menampung hasil kembalian dari KIRI API
		
		
				\begin{itemize}
							\item Atribut
					
					
									\begin{itemize}
												\item status, digunakan untuk menyimpan apakah status dari hasil pencarian.
												\item routingResult, digunakan untuk menyimpan langkah-langkah perjalanan.
									\end{itemize}
					
							\item Method
					
					
									\begin{itemize}
												\item public RoutingResponse(String paramStatus, Steps paramRoutingResult), merupakan \textit{constructor} dari kelas RoutingResult.
												\item public RoutingResponse(), merupakan \textit{constructor} dari kelas RoutingResult.
												\item public String getStatus(), merupakan \textit{getter} dari atribut status.
												\item public void setStatus(String status), merupakan \textit{setter} dari atribut status.
												\item public Steps getRoutingResult(), merupakan \textit{getter} dari atribut routingResult.
												\item public void setRoutingResult(Steps routingResult), merupakan \textit{setter} dari atribut routingResult.
									\end{itemize}
				\end{itemize}
		
		\item Kelas Step, merupakan kelas untuk menampung jalur perjalanan dari lokasi awal ke lokasi tujuan dengan menggunakan transportasi publik yang diberikan oleh KIRI API.
		
		
				\begin{itemize}
							\item Atribut
					
					
									\begin{itemize}
												\item String humanDescription, merupakan atribut untuk menjelaskan cara perjalanan yang bahasanya dimengerti oleh pengguna.
									\end{itemize}
					
							\item Method
					
					
									\begin{itemize}
												\item public Step(), merupakan \textit{constructor} dari kelas Step.
												\item public Step(String paramHumanDescription), merupakan \textit{constructor} dari kelas Step.
												\item public String getHumanDescription(), merupakan \textit{getter} dari atribut humanDescription.
												\item public void setHumanDescription(String humanDescription), merupakan \textit{setter} dari atribut humanDescription.
									\end{itemize}
				\end{itemize}
		
		\item Kelas Steps, merupakan kelas untuk menampung kumpulan step.
		
		
				\begin{itemize}
							\item Atribut
					
					
									\begin{itemize}
												\item Step[] steps, merupakan atribut yang berisi \textit{array} step
									\end{itemize}
					
							\item Method
					
					
									\begin{itemize}
												\item public Steps(Step[] paramSteps), merupakan konstruktor dari kelas Steps.
												\item public Step[] getSteps(), merupakan \textit{getter} dari atribut steps.
												\item public void setSteps(Step[] steps), merupakan \textit{setter} dari atribut steps.
									\end{itemize}
				\end{itemize}
\end{itemize}




\subsection{Sequence Diagram}

Pada sub bab ini, akan dijelaskan alur program dengan menggunakan \textit{sequence diagram} pada ~\ref{fig:diagramSequence2}

\begin{figure}[htbp]
	\centering
		\includegraphics[width=1.00\textwidth]{C:/Skripsi/doc/DokumenSkripsi/Gambar/diagramSequence2.PNG}
	\caption{Sequence Diagram Pembuatan Twitter Bot untuk Mencari Jalur Transportasi Publik}
	\label{fig:diagramSequence2}
\end{figure}


Pertama, program akan menjalankan melakukan \textit{streaming} pada saat kelas \textit{main} dijalankan. Kelas \textit{main} akan membuka gerbang untuk mengakses \textit{Twitter API}, lalu \textit{steaming} akan dilakukan dengan melakukan \textit{track} dengan katakunci @kiriupdate. Program akan terus menangkap semua \textit{tweet} yang dirujuk kepada @kiriupdate.

Kelas TwitterGateway akan memproses \textit{tweet} ketika terdapat \textit{tweet} yang dirujuk (\textit{mention}) kepada @kiriupdate. Melalui \textit{method onStatus} maka \textit{tweet} tersebut akan disimpan nama user pengirimnya, dan diperiksa apakah \textit{tweet} tersebut dilakukan untuk mencari jalur transportasi publik atau bukan. Jika benar maka alamat dari lokasi awal dan lokasi tujuan akan disimpan lalu akan dicari koordinat dari masing-masing lokasi menggunakan KIRI API. Proses pencarian koordinat ini dilakukan oleh kelas KIRIGateway.

Kelas KIRIGateway akan memanggil \textit{method GetLatLon} untuk pencarian koordinat. Setelah didapatkan koordinat dari masing-masing lokasi maka kelas TwitterGateway akan mengolahnya terlebih dahulu karena kembalian dari \textit{method GetLatLon} ini berupa JSON. Setelah itu maka hasilnya akan dikembalikan kepada kelas KIRIGateway untuk dicari jalurnya menggunakan \textit{method GetTrack}. Hasil dari \textit{method GetTrack} lalu disimpan pada atribut \textit{step, steps}, dan \textit{routingResult}.

Setelah semuanya selesai maka langkah-langkah jalur transportasi publik siap di \textit{reply}. Kelas TwitterGateway memanggil \textit{method Tweet} untuk di-\textit{reply tweet} yang berisikan langkah-langkah dari jalur transportasi publik. \textit{Tweet} akan di-\textit{reply} satu per satu sesuai dengan banyaknya \textit{step} yang ada. Setelah semuanya selesai, program akan menunggu \textit{tweet} selanjutnya.

\subsection{Perancangan Antar Muka}

Pada sub bab ini akan dibahas mengenai antarmuka pada aplikasi Pembuatan Twitter Bot untuk Mencari Jalur Transportasi Publik. Aplikasi ini memiliki perancangan antarmuka berbasis \textit{text} yang dapat dilihat pada gambar ~\ref{fig:StartingProgram}. Sedangkan user dapat mencoba aplikasi ini secara langsung menggunakan Twitter, baik menggunakan website Twitter ataupun aplikasi Twitter yang dapat dilihat pada gambar ~\ref{fig:tweet}.

\begin{figure}[htbp]
	\centering
		\includegraphics[width=1.00\textwidth]{C:/Skripsi/doc/DokumenSkripsi/Gambar/tweet.PNG}
	\caption{Tampilan Website Twitter}
	\label{fig:tweet}
\end{figure}

\begin{figure}
	\centering
		\includegraphics{C:/Skripsi/doc/DokumenSkripsi/Gambar/StartingProgram.PNG}
	\caption{Tampilan Aplikasi Pada Saat Program Dijalankan}
	\label{fig:StartingProgram}
\end{figure}


